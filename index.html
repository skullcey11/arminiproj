<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#ffffff">
  <title>AR Product Display</title>
  
  <!-- Model Viewer library -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
      position: relative;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    model-viewer {
      width: 100%;
      max-width: 900px;
      height: calc(100vh - 140px);
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* Hotspot label */
    .hotspot {
      background: rgba(255, 255, 255, 0.9);
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 0.9rem;
      color: #333;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transform: translate(-50%, -100%);
      pointer-events: none;
    }

    /* Switch button */
    .switch-btn {
      position: absolute;
      bottom: 20px;
      left: 20px;
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .switch-btn:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

  <!-- 3D Model -->
  <model-viewer id="arModel"
                src="assets/Astronaut.glb"
                ar
                ar-modes="webxr scene-viewer quick-look"
                camera-controls
                auto-rotate
                exposure="1"
                shadow-intensity="1"
                environment-image="neutral"
                poster="assets/Astronaut.glb">

    <!-- Hotspot attached to model -->
    <div class="hotspot" slot="hotspot" data-position="0m 0.3m 0m" id="hotspotLabel">
      Super Sneaker<br>₹2999
    </div>

  </model-viewer>

  <!-- Mobile / AR instructions -->
  <div id="instructions" style="max-width:900px;width:90%;margin-top:12px;text-align:center;color:#444;font-size:0.95rem;">
    Tip: Tap the AR icon inside the viewer to try the model in your space. For best results open this page in Chrome (Android) or Safari (iOS). Make sure your phone and this computer are on the same Wi‑Fi if testing locally.
  </div>

  <noscript style="margin-top:12px;color:#a00;">JavaScript is required to load the 3D viewer. Please enable JavaScript.</noscript>

  <!-- Switch product button -->
  <button class="switch-btn" id="switchBtn">Switch Product</button>

  <script>
    const modelViewer = document.getElementById('arModel');
    const hotspotLabel = document.getElementById('hotspotLabel');
    const switchBtn = document.getElementById('switchBtn');

    const products = [
      { name: "Super Sneaker", price: "₹2999", src: "assets/Astronaut.glb" },
      { name: "Smartphone X", price: "₹19999", src: "assets/Astronaut.glb" }
    ];

    let currentIndex = 0;

    switchBtn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % products.length;
      const product = products[currentIndex];

        // Update model
        modelViewer.src = product.src;

        // Provide a brief visual feedback for mobile users
        switchBtn.innerText = 'Switched: ' + product.name;
        setTimeout(() => { switchBtn.innerText = 'Switch Product'; }, 1400);

        // Update hotspot label
        hotspotLabel.innerHTML = `${product.name}<br>${product.price}`;
    });
  </script>

</body>
</html>
